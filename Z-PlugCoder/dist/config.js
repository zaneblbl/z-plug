!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="build/",n(n.s=3)}([,,,function(e,t,n){n(4),e.exports=n(5)},function(e,t){var n=document.getElementById("upload_btn"),o=document.getElementById("download_btn"),c=document.getElementById("save_btn"),i=document.getElementById("username"),a=document.getElementById("access_token"),d=document.getElementById("path"),u=document.getElementsByName("isSave"),s=document.getElementById("show_msg");function f(e,t,n){let r=`https://api.github.com/repos/${e}/${n.substring(0,n.indexOf("/"))}/contents/${n.substring(n.indexOf("/")+1)}?access_token=${t}`;return new Promise((e,t)=>{try{chrome.extension.sendMessage({url:r,type:"get"},(function(n){n?e(n):t("get content undefined")}))}catch(e){t()}})}chrome.storage.sync.get({userName:"",accessToken:"",path:"",isSave:""},(function(e){for(r in i.value=e.userName,a.value=e.accessToken,d.value=e.path,u)u[r].value===e.isSave&&(u[r].checked=!0,e.isSave)})),c.addEventListener("click",(function(){!function(e){"yes"===e?chrome.storage.sync.set({userName:i.value,accessToken:a.value,path:d.value,isSave:e},(function(){s.innerText="save success!"})):chrome.storage.sync.set({userName:"",accessToken:"",path:"",isSave:e},(function(){s.innerText="save success!"}))}(function(e){for(let t in e)if(e[t].checked)return e[t].value}(u))})),n.addEventListener("click",(function(){chrome.bookmarks.getTree((function(e){!function(e,t,n,r){let o=`https://api.github.com/repos/${e}/${n.substring(0,n.indexOf("/"))}/contents/${n.substring(n.indexOf("/")+1)}?access_token=${t}`,c={};f(e,t,n).then(e=>(c.sha=JSON.parse(e).sha,c.message="update bookmark",c.content=l.encode(JSON.stringify(r)),new Promise((e,t)=>{try{chrome.extension.sendMessage({url:o,type:"put",params:c},(function(n){n?(s.innerText="uplaod success！",e(n)):t("undefined")}))}catch(e){t(e)}})),e=>null)}(i.value,a.value,d.value,e)}))})),o.addEventListener("click",(function(){let e=null;f(i.value,a.value,d.value).then(t=>{if(e=l.decode(JSON.parse(t).content.toString()),e){let t=JSON.parse(e).find((function(e){return"0"===e.id})).children;!function e(t){chrome.bookmarks.getChildren(t,(function(t){for(let n in t)"1"===t[n].id||"2"===t[n].id?e(t[n].id):chrome.bookmarks.removeTree(t[n].id,(function(){}))}))}("0"),setTimeout(()=>{!function e(t,n){for(let r in t)if(t[r].parentId=n,"1"===t[r].id||"2"===t[r].id)e(t[r].children,t[r].id);else if(t[r].dateAdded&&delete t[r].dateAdded,t[r].id&&delete t[r].id,t[r].dateGroupModified&&delete t[r].dateGroupModified,t[r].children){let n=t[r].children;delete t[r].children,chrome.bookmarks.create(t[r],(function(t){e(n,t.id)}))}else chrome.bookmarks.create(t[r])}(t,"0")},0),s.innerText="DownLoad Success!"}},e=>{})}));var l={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,r,o,c,i,a,d="",u=0;for(e=l._utf8_encode(e);u<e.length;)o=(t=e.charCodeAt(u++))>>2,c=(3&t)<<4|(n=e.charCodeAt(u++))>>4,i=(15&n)<<2|(r=e.charCodeAt(u++))>>6,a=63&r,isNaN(n)?i=a=64:isNaN(r)&&(a=64),d=d+this._keyStr.charAt(o)+this._keyStr.charAt(c)+this._keyStr.charAt(i)+this._keyStr.charAt(a);return d},decode:function(e){var t,n,r,o,c,i,a="",d=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");d<e.length;)t=this._keyStr.indexOf(e.charAt(d++))<<2|(o=this._keyStr.indexOf(e.charAt(d++)))>>4,n=(15&o)<<4|(c=this._keyStr.indexOf(e.charAt(d++)))>>2,r=(3&c)<<6|(i=this._keyStr.indexOf(e.charAt(d++))),a+=String.fromCharCode(t),64!=c&&(a+=String.fromCharCode(n)),64!=i&&(a+=String.fromCharCode(r));return a=l._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/rn/g,"n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",n=0,r=c1=c2=0;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}}},function(e,t){}]);